<!--
 Copyright (c) 2024, 2025, Oracle and/or its affiliates.
 Licensed under The Universal Permissive License (UPL), Version 1.0 as shown at https://oss.oracle.com/licenses/upl/
 -->

<div class="wkt-model-edit-attribute-container">
  <div class="wkt-model-edit-attribute-container-main">

    <oj-bind-if test="[[editorType === 'credential']]">
      <oj-c-input-password
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        validators="[[validators]]"
      >
      </oj-c-input-password>
    </oj-bind-if>

    <oj-bind-if test="[[isTextEditorType()]]">
      <oj-c-input-text
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        validators="[[validators]]"
      >
      </oj-c-input-text>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'list']]">
      <oj-module config="[[createModuleConfig('modelEdit/list-attribute-editor')]]"></oj-module>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'dict']]">
      <oj-module config="[[createModuleConfig('modelEdit/dict-attribute-editor')]]"></oj-module>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'boolean']]">
      <div class="wkt-model-edit-boolean-box" :class="[[extraClass]]">
        <oj-switch
          label-hint="[[attributeLabel]]"
          help.instruction="[[attributeHelp]]"
          value="{{getValueObservable()}}"
          translations="[[switchTranslations]]"
          disabled="[[disabled]]"
          readOnly="[[readOnly]]"
        >
        </oj-switch>
      </div>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'select']]">
      <oj-c-select-single
        item-text="label"
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        data="[[optionsProvider]]"
      >
      </oj-c-select-single>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'selectMulti']]">
      <!-- oj-c-select-multiple broken: Jira JET-76802 -->
      <!-- oj-c-select-multiple uses data="..." instead of options="..." -->
      <oj-select-many
        item-text="label"
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        options="[[optionsProvider]]"
      >
      </oj-select-many>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'combo']]">
      <oj-combobox-one
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        options="[[optionsProvider]]"
      >
      </oj-combobox-one>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'comboMulti']]">
      <oj-combobox-many
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        options="[[optionsProvider]]"
      >
      </oj-combobox-many>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'textArea']]">
      <oj-c-text-area
        label-hint="[[attributeLabel]]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        rows="3"
      >
      </oj-c-text-area>
    </oj-bind-if>

    <oj-bind-if test="[[editorType === 'unknown']]">
      <oj-c-input-text
        label-hint="[[attributeLabel + ' (' + attribute.type + ' ???)']]"
        help.instruction="[[attributeHelp]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
      >
      </oj-c-input-text>
    </oj-bind-if>

    <oj-bind-if test="[[usesToken]]">
      <div
        class="wkt-model-edit-token-detail"
        :class="[[{'wkt-token-error': tokenError}]]"
      >
        <oj-bind-text value="[[fromLabel]]"></oj-bind-text>
      </div>
    </oj-bind-if>

  </div>

  <oj-c-button
    label="[[labelMapper('options')]]"
    display="icons"
    class="wkt-model-edit-attribute-menu-button"
    chroming="borderless"
    on-oj-action="[[showOptions]]">
    <span slot="endIcon" :class="[[menuIconClass]]" role="img"></span>
  </oj-c-button>
</div>
