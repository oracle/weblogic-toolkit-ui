<!--
 Copyright (c) 2024, Oracle and/or its affiliates.
 Licensed under The Universal Permissive License (UPL), Version 1.0 as shown at https://oss.oracle.com/licenses/upl/
 -->

<div class="wkt-model-edit-field-container">
  <div class="wkt-model-edit-field-container-main">
    <oj-bind-if test="[[displayType === 'password']]">
      <oj-c-input-password
        label-hint="[[attributeLabel(field)]]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        validators="[[validators]]"
      >
      </oj-c-input-password>
    </oj-bind-if>
    <oj-bind-if test="[[displayType === 'string']]">
      <oj-c-input-text
        label-hint="[[attributeLabel(field)]]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        validators="[[validators]]"
      >
      </oj-c-input-text>
    </oj-bind-if>
    <oj-bind-if test="[[displayType === 'integer']]">
      <oj-c-input-text
        label-hint="[[attributeLabel(field)]]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        validators="[[validators]]"
      >
      </oj-c-input-text>
    </oj-bind-if>

    <oj-bind-if test="[[displayType === 'list']]">
      <oj-module config="[[createModuleConfig('modelEdit/list-edit-field')]]"></oj-module>
    </oj-bind-if>

    <oj-bind-if test="[[displayType === 'dict']]">
      <oj-c-input-text
        label-hint="[[attributeLabel(field) + ' (dict)']]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
      >
      </oj-c-input-text>
    </oj-bind-if>
    <oj-bind-if test="[[displayType === 'boolean']]">
      <div class="wkt-model-edit-boolean-box">
        <oj-switch
          label-hint="[[attributeLabel(field)]]"
          help.instruction="[[attributeHelp(field)]]"
          value="{{getValueObservable()}}"
          translations="[[switchTranslations]]"
          disabled="[[disabled]]"
          readOnly="[[readOnly]]"
        >
        </oj-switch>
      </div>
    </oj-bind-if>
    <oj-bind-if test="[[displayType === 'choice']]">
      <oj-select-single
        label-hint="[[attributeLabel(field)]]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
        data="[[optionsProvider]]"
      >
      </oj-select-single>
    </oj-bind-if>
    <oj-bind-if test="[[displayType === 'unknown']]">
      <oj-c-input-text
        label-hint="[[attributeLabel(field) + ' (' + field.type + ' ???)']]"
        help.instruction="[[attributeHelp(field)]]"
        value="{{getValueObservable()}}"
        disabled="[[disabled]]"
        readOnly="[[readOnly]]"
      >
      </oj-c-input-text>
    </oj-bind-if>

    <oj-bind-if test="[[usesToken]]">
      <div
        class="wkt-model-edit-token-detail"
        :class="[[{'wkt-token-error': tokenError}]]"
      >
        <oj-bind-text value="[[fromLabel]]"></oj-bind-text>
      </div>
    </oj-bind-if>
  </div>

  <oj-c-button
    label="[[fieldLabelMapper('options')]]"
    display="icons"
    class="wkt-model-edit-field-menu-button"
    chroming="borderless"
    on-oj-action="[[showOptions]]">
    <span slot="endIcon" :class="[[menuIconClass]]" role="img"></span>
  </oj-c-button>
</div>
